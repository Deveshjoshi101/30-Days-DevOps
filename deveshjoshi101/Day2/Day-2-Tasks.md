### Day 2: Working with Files and Directories

#### **Task 1: Create, Copy, Move, and Delete Files and Directories Using Bash**

**Objective:** Perform basic file and directory operations using Bash commands.

**Steps:**

1. **Creating Files and Directories:**

   - **Create a File:**

     ```bash
     touch example.txt
     ```

     This command creates an empty file named `example.txt`.

   - **Create a Directory:**
     ```bash
     mkdir example_dir
     ```
     This command creates a directory named `example_dir`.

2. **Copying Files and Directories:**

   - **Copy a File:**

     ```bash
     cp example.txt example_copy.txt
     ```

     This command copies `example.txt` to `example_copy.txt`.

   - **Copy a Directory (Recursively):**
     ```bash
     cp -r example_dir example_dir_copy
     ```
     The `-r` flag enables recursive copying, which is necessary for directories.

3. **Moving Files and Directories:**

   - **Move a File:**

     ```bash
     mv example_copy.txt example_dir/
     ```

     This command moves `example_copy.txt` into the `example_dir` directory.

   - **Move and Rename a File:**
     ```bash
     mv example.txt renamed_example.txt
     ```
     This command moves and renames `example.txt` to `renamed_example.txt`.

4. **Deleting Files and Directories:**

   - **Delete a File:**

     ```bash
     rm renamed_example.txt
     ```

     This command deletes the file `renamed_example.txt`.

   - **Delete a Directory (Recursively):**
     ```bash
     rm -r example_dir
     ```
     The `-r` flag is used to delete a directory and its contents.

**Outcome:** The ability to create, copy, move, and delete files and directories using basic Bash commands.

---

#### **Task 2: Write a Script to Batch Rename Files Based on a Pattern**

**Objective:** Create a Bash script that renames multiple files according to a specified pattern.

**Script:**

```bash
#!/bin/bash
# Script to batch rename files with a specified prefix

# Check if the correct number of arguments is provided
if [ $# -ne 2 ]; then
    echo "Usage: $0 <directory> <prefix>"
    exit 1
fi

directory=$1
prefix=$2
counter=1

# Iterate over all files in the directory
for file in "$directory"/*; do
    # Check if it's a file
    if [ -f "$file" ]; then
        # Get the base name and extension separately
        base_name=$(basename "$file")
        extension="${base_name##*.}"

        # Check if the file has an extension
        if [ "$base_name" == "$extension" ]; then
            # No extension
            new_name="${prefix}_${counter}"
        else
            # Has extension
            new_name="${prefix}_${counter}.${extension}"
        fi

        # Rename the file
        mv "$file" "$directory/$new_name"
        echo "Renamed $file to $new_name"
        ((counter++))
    fi
done
```

**Explanation:**

- The script takes two arguments: a directory path and a prefix for the new filenames.
- It iterates over each file in the specified directory, renaming it to the pattern `<prefix>_<counter>.<extension>`.
- The `counter` variable ensures that each file gets a unique name.

**Usage Example:**

```bash
./rename_files.sh /path/to/directory newname
```

This will rename all files in `/path/to/directory` to `newname_1.extension`, `newname_2.extension`, and so on.

**Outcome:** A script capable of batch renaming files based on a user-defined pattern, making it easier to organize large numbers of files.

---

#### **Task 3: Use Loops (for, while) to Iterate Over Files in a Directory**

**Objective:** Write Bash scripts that use loops to process files within a directory.

**Script 1: Using `for` Loop:**

```bash
#!/bin/bash
# Script to list all files in a directory

directory=$1

for file in "$directory"/*; do
    if [ -f "$file" ]; then
        echo "File: $file"
    fi
done
```

**Script 2: Using `while` Loop:**

```bash
#!/bin/bash
# Script to process files using a while loop

directory=$1
file_list=$(ls "$directory")
counter=1

while [ $counter -le $(echo "$file_list" | wc -l) ]; do
    file=$(echo "$file_list" | sed -n "${counter}p")
    echo "Processing file: $file"
    ((counter++))
done
```

**Explanation:**

- **For Loop Script:** Iterates over all files in the specified directory and prints their names.
- **While Loop Script:** Uses a `while` loop to iterate through a list of files generated by the `ls` command.

**Outcome:** Understanding of how to use loops in Bash to process multiple files, which is crucial for automation tasks.

---

#### **Task 4: Implement Error Handling in Your Scripts**

**Objective:** Enhance scripts with error handling to manage unexpected situations.

**Script:**

```bash
#!/bin/bash
# Script with error handling

file_to_delete=$1

if [ ! -e "$file_to_delete" ]; then
    echo "Error: File $file_to_delete does not exist."
    exit 1
fi

if rm "$file_to_delete"; then
    echo "File $file_to_delete deleted successfully."
else
    echo "Error: Could not delete $file_to_delete."
    exit 1
fi
```

**Explanation:**

- The script checks whether the file exists before attempting to delete it.
- If the file doesnâ€™t exist, an error message is displayed, and the script exits with a status of `1`.
- If the `rm` command fails, another error message is displayed.

**Outcome:** A script that includes basic error handling, making it more robust and user-friendly by providing clear feedback on failures.

---

#### **Task 5: Learn About File Permissions and Modify Them Using `chmod`**

**Objective:** Understand Linux file permissions and how to modify them using the `chmod` command.

**Understanding File Permissions:**

- **File Permissions Format:** File permissions are displayed in a format like `-rwxr-xr--`, where:
  - `r` (read), `w` (write), `x` (execute) are the permission types.
  - The first character indicates the file type (`-` for regular files, `d` for directories).
  - The next three characters represent the owner's permissions, the next three represent the group's permissions, and the final three represent others' permissions.

**Modifying File Permissions:**

- **Change Permissions Using Symbolic Mode:**

  ```bash
  chmod u+x filename.sh
  ```

  This adds execute permission (`x`) for the user (`u`).

- **Change Permissions Using Numeric Mode:**
  ```bash
  chmod 755 filename.sh
  ```
  This sets permissions to `rwxr-xr-x`, meaning the owner can read, write, and execute, while the group and others can only read and execute.

**Example:**

- **Give Full Permissions to the Owner, Read/Execute to Group, and Read-Only to Others:**
  ```bash
  chmod 754 example.txt
  ```
  Results in `rwxr-xr--`.

## **Outcome:** A solid understanding of how to view and modify file permissions, ensuring proper access control for scripts and files.
